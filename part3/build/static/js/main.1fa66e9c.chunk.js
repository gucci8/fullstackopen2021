(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(2),c=t(15),o=t.n(c),a=t(6),u=t(3),i=t(0),d=function(e){return Object(i.jsxs)("form",{children:["filter shown with ",Object(i.jsx)("input",{value:e.filtCond,onChange:e.handler})]})},s=function(e){return Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:e.person.name}),Object(i.jsx)("td",{children:e.person.number}),Object(i.jsx)("td",{children:Object(i.jsx)("button",{onClick:e.deletePerson,children:"delete"})})]},e.person.id)},l=function(e){var n=e.persons.filter((function(n){return n.name.toLowerCase().includes(e.filtStr.toLowerCase())}));return Object(i.jsx)("table",{children:Object(i.jsx)("tbody",{children:n.map((function(n){return Object(i.jsx)(s,{person:n,deletePerson:e.deletePerson(n.name,n.id)},n.id)}))})})},j=function(e){return Object(i.jsxs)("form",{onSubmit:e.addNew,children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{value:e.newName,onChange:e.nameHandler})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{value:e.newNumber,onChange:e.numHandler})]}),Object(i.jsx)("button",{type:"submit",children:"add"})]})},b=function(e){var n=e.message,t={color:e.color,background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return null===n?null:Object(i.jsx)("div",{style:t,children:n})},f=t(4),h=t.n(f),m="/api/persons",O={getAll:function(){return h.a.get(m).then((function(e){return e.data}))},create:function(e){return h.a.post(m,e).then((function(e){return e.data}))},del:function(e){return h.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},update:function(e,n){return h.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))}},p=(t(39),function(){var e=Object(r.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],o=Object(r.useState)(""),s=Object(u.a)(o,2),f=s[0],h=s[1],m=Object(r.useState)(""),p=Object(u.a)(m,2),g=p[0],x=p[1],v=Object(r.useState)(""),w=Object(u.a)(v,2),S=w[0],y=w[1],C=Object(r.useState)({msg:null,color:"red"}),k=Object(u.a)(C,2),N=k[0],A=k[1],P=function(e,n){A({msg:e,color:n}),setTimeout((function(){A({msg:null})}),3e3)};return Object(r.useEffect)((function(){O.getAll().then((function(e){c(e)}))}),[]),Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(b,{message:N.msg,color:N.color}),Object(i.jsx)(d,{filtCond:S,handler:function(e){y(e.target.value)}}),Object(i.jsx)("h3",{children:"Add a new"}),Object(i.jsx)(j,{addNew:function(e){if(e.preventDefault(),t.map((function(e){return e.name})).includes(f)){if(window.confirm("".concat(f," is already added to the phonebook, replace the old number with a new one?"))){var n=t.find((function(e){return e.name.includes(f)})),r=Object(a.a)(Object(a.a)({},n),{},{number:g});O.update(n.id,r).then((function(e){c(t.map((function(t){return t.id!==n.id?t:e}))),h(""),x(""),P("Changed ".concat(e.name,"'s number"),"green")})).catch((function(e){P("".concat(e.response.data.error),"red")}))}}else{var o={name:f,number:g};O.create(o).then((function(e){c(t.concat(e)),h(""),x(""),P("Added ".concat(e.name),"green")})).catch((function(e){P("".concat(e.response.data.error),"red")}))}},newName:f,nameHandler:function(e){h(e.target.value)},newNumber:g,numHandler:function(e){x(e.target.value)}}),Object(i.jsx)("h3",{children:"Numbers"}),Object(i.jsx)(l,{persons:t,filtStr:S,deletePerson:function(e,n){return function(){window.confirm("Delete ".concat(e,"?"))&&O.del(n).then((function(){c(t.filter((function(e){return e.id!==n}))),P("Removed ".concat(e," successfully."),"green")})).catch((function(n){return P("Information of ".concat(e," has already been removed from server"),"red")}))}}})]})}),g=O.getAll();o.a.render(Object(i.jsx)(p,{persons:g}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.1fa66e9c.chunk.js.map